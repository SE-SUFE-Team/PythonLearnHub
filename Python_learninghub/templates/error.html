{% extends "base.html" %}

{% block title %}{{ error_code }} 错误 - Python学习平台{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-6 mx-auto">
        <div class="text-center py-5">
            <!-- Error Icon -->
            <div class="error-icon mb-4">
                {% if error_code == 404 %}
                    <i class="fas fa-search fs-1 text-warning"></i>
                {% elif error_code == 500 %}
                    <i class="fas fa-exclamation-triangle fs-1 text-danger"></i>
                {% else %}
                    <i class="fas fa-exclamation-circle fs-1 text-muted"></i>
                {% endif %}
            </div>
            
            <!-- Error Code -->
            <h1 class="display-1 fw-bold text-muted mb-3">{{ error_code }}</h1>
            
            <!-- Error Message -->
            <h3 class="mb-3">
                {% if error_code == 404 %}
                    页面不存在
                {% elif error_code == 500 %}
                    服务器内部错误
                {% else %}
                    出现错误
                {% endif %}
            </h3>
            
            <p class="text-muted mb-4">
                {% if error_code == 404 %}
                    抱歉，您访问的页面不存在或已被移动。
                {% elif error_code == 500 %}
                    抱歉，服务器遇到了一些问题。我们正在努力修复。
                {% else %}
                    {{ error_message or '发生了一个未知错误' }}
                {% endif %}
            </p>
            
            <!-- Suggested Actions -->
            <div class="suggested-actions mb-4">
                {% if error_code == 404 %}
                <div class="card bg-light border-0">
                    <div class="card-body">
                        <h6><i class="fas fa-lightbulb"></i> 建议您:</h6>
                        <ul class="list-unstyled text-start">
                            <li class="mb-2">
                                <i class="fas fa-check text-success"></i> 
                                检查URL是否正确
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success"></i> 
                                使用顶部导航菜单
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success"></i> 
                                尝试搜索相关内容
                            </li>
                            <li class="mb-0">
                                <i class="fas fa-check text-success"></i> 
                                返回首页重新开始
                            </li>
                        </ul>
                    </div>
                </div>
                {% elif error_code == 500 %}
                <div class="card bg-light border-0">
                    <div class="card-body">
                        <h6><i class="fas fa-tools"></i> 我们正在:</h6>
                        <ul class="list-unstyled text-start">
                            <li class="mb-2">
                                <i class="fas fa-cog text-primary spinning"></i> 
                                诊断问题原因
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-wrench text-warning"></i> 
                                修复系统问题
                            </li>
                            <li class="mb-0">
                                <i class="fas fa-check text-success"></i> 
                                确保服务稳定
                            </li>
                        </ul>
                        <small class="text-muted">请稍后再试或联系技术支持</small>
                    </div>
                </div>
                {% endif %}
            </div>
            
            <!-- Action Buttons -->
            <div class="d-flex justify-content-center gap-3 flex-wrap">
                <a href="{{ url_for('index') }}" class="btn btn-primary">
                    <i class="fas fa-home"></i> 返回首页
                </a>
                
                {% if error_code == 404 %}
                <button class="btn btn-outline-secondary" onclick="history.back()">
                    <i class="fas fa-arrow-left"></i> 返回上页
                </button>
                {% endif %}
                
                <a href="{{ url_for('search') }}" class="btn btn-outline-info">
                    <i class="fas fa-search"></i> 搜索内容
                </a>
                
                {% if error_code == 500 %}
                <button class="btn btn-outline-success" onclick="location.reload()">
                    <i class="fas fa-redo"></i> 刷新页面
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Popular Content (for 404 errors) -->
{% if error_code == 404 %}
<div class="row mt-5 pt-4 border-top">
    <div class="col-12 mb-4">
        <h4 class="text-center">
            <i class="fas fa-star"></i> 热门学习内容
        </h4>
        <p class="text-center text-muted">也许您正在寻找这些内容</p>
    </div>
</div>

<div class="row">
    {% for module in navigation_modules[:6] %}
    <div class="col-lg-4 col-md-6 mb-4">
        <div class="card border-0 shadow-sm">
            <div class="card-body">
                <div class="d-flex align-items-center">
                    <span class="fs-3 me-3">{{ module.icon }}</span>
                    <div>
                        <h6 class="mb-1">
                            <a href="{{ url_for('module_detail', module_id=module.id) }}" 
                               class="text-decoration-none">
                                {{ module.title }}
                            </a>
                        </h6>
                        <small class="text-muted">{{ module.description }}</small>
                        <br>
                        <span class="badge bg-{{ 'success' if module.difficulty == '入门' else 'primary' if module.difficulty == '基础' else 'warning' if module.difficulty == '中级' else 'danger' }} badge-sm">
                            {{ module.difficulty }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Quick Tools -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card bg-primary text-white">
            <div class="card-body text-center">
                <h5><i class="fas fa-tools"></i> 快速工具</h5>
                <p class="mb-3">直接使用这些实用工具开始学习</p>
                <div class="d-flex justify-content-center gap-3 flex-wrap">
                    <a href="{{ url_for('code_playground') }}" class="btn btn-light">
                        <i class="fas fa-code"></i> 代码练习场
                    </a>
                    <a href="{{ url_for('regex_tool') }}" class="btn btn-outline-light">
                        <i class="fas fa-search"></i> 正则工具
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- Copyright Notice for Error Page -->
<div class="row mt-4">
    <div class="col-12">
        <div class="alert alert-light border-primary text-center">
            <small class="text-muted">
                <i class="fas fa-university"></i>
                Python学习平台版权归 <strong>相关机构</strong> 所有
                | 仅供教学和学习使用
            </small>
        </div>
    </div>
</div>

<style>
.error-icon {
    line-height: 1;
}

.spinning {
    animation: spin 2s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.suggested-actions {
    max-width: 400px;
    margin: 0 auto;
}

.card {
    transition: transform 0.2s ease;
}

.card:hover {
    transform: translateY(-2px);
}

.badge-sm {
    font-size: 0.7em;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add some animation to the error icon
    const errorIcon = document.querySelector('.error-icon i');
    if (errorIcon) {
        setTimeout(() => {
            errorIcon.style.animation = 'bounce 0.5s ease-in-out';
        }, 500);
    }
});

// Add bounce animation
const style = document.createElement('style');
style.textContent = `
    @keyframes bounce {
        0%, 20%, 60%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        80% { transform: translateY(-5px); }
    }
`;
document.head.appendChild(style);
</script>
{% endblock %}